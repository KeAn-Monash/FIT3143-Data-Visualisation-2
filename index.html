<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
    <title>Data Visualisation 2</title>
</head>
<body>
    <div class="header-container">
        <div class="header">
            <img src="img/earth.png" class="header-img" />
            <div class="title">World Disaster Risk</div>
            <p class="subtitle">
                focus on varying critical topics related to disaster risk management
            </p>
        </div>
    </div>
    <div class="card" style="background-color: whitesmoke;">
        <p class="inline-title">
            World Risk Index
        </p>
        <p style="margin-left: 10%; margin-right: 10%;">
            The following map shows the average risk index around the world from year 2011 to year 2021. 
            Among all the countries, Katar has the smallest risk index among all the countries, which is 
            <span style="color:#59C9A5; font-weight: bold;">0.02</span> and recorded in year <b>2011</b>. 
            Vanuatu has the highest risk index recorded in year 
            <b>2019</b>, which is <span style="color: #033F63; font-weight: bold;">56.71</span>.
        </p>
        <div style="padding: 1rem; margin-left: 10%; margin-right: 5%;">
            <div id="map_plot" class="full-width"></div>
        </div>
    </div>
    <div class="divider"></div>
    <div class="card" style="background-color: light">
        <p class="inline-title">
            Relationship of Exposure, Vulnerability and Susceptibility against World Risk Index
        </p>
        <p>
            The risk index is composed of <b>exposure</b> to extreme natural hazards and the <b>societal vulnerability</b> 
            of individual countries. Earthquakes, cyclones, floods, droughts, and climate-induced 
            sea-level rise are considered in the exposure analysis. Societal vulnerability is divided into susceptibility to extreme natural events, lack of coping 
            capacities, and lack of adaptive capacities. All index components are scaled to the value range 
            from 0 to 100. The higher a country's index score, the higher its national disaster risk
            <br /><br />
            <i>**Try to select using button to change the shown attributes</i>
        </p>
        <div class="button-wrapper">
            <button class="index-button" onclick="showHidePlot('exposure')">
                Exposure
            </button>
            <button class="index-button" onclick="showHidePlot('vulnerability')">
                Vulnerability
            </button>
            <button class="index-button" onclick="showHidePlot('susceptibility')">
                Susceptibility
            </button>
        </div>
        <div class="plot-center">
            <div id="scatter_bar_exposure" class="sb"></div>
            <div id="scatter_bar_vulnerability" class="sb" style="display: none;"></div>
            <div id="scatter_bar_susceptibility" class="sb" style="display: none;"></div>
        </div>
    </div>
    <div class="divider"></div>
    <div class="card" style="background-color: rgba(32, 178, 171, 0.123);">
        <p class="inline-title">
            Relationship of 
            <div class="inline-title-cat">Exposure</div>, 
            <div class="inline-title-cat">Vulnerability</div> and 
            <div class="inline-title-cat">Susceptibility</div> against World Risk Index
        </p>
        <div style="margin-left: 10%; margin-right: 10%;">
            The <b>lack of Coping Capabilities</b> indicates the Coping capacities in dependence of governance, preparedness and early warning, medical care, and social and material security
            while the <b>lack of Adaptive Capacities</b> indicates the Adaptive capacities related to coming natural events, climate change, and other challenges
        </div>
        <div class="plot-center" style="padding: 1rem; margin-top: 1rem;margin-left: 5%;">
            <div id="plot2"></div>
        </div>
    </div>
    <div class="card">
        <p class="inline-title">
            Overview of the regions with lowest risk
        </p>
        <div class="plot-center" style="display: flex; flex-direction: row; justify-content:space-evenly;">
            <div class="text-box" style="flex-direction: column">
                The chart at the right gives an overview of the regions with the lowest risk 
                <i style="font-weight:bold">from year 2011 to year 2021.</i>
                <b>Qatar</b> has recorded as the regions with lowest risk throughout the 10 year period. 
                <b>Malta</b> stays at the 2nd 
                place in the world which has the 2nd lowest risk index. 
                <br /><br />
                For the rest of the regions, they have recorded differently in the 10 year period. However, 
                <b>Saudi Arabia</b> and 
                <b>Barbados</b> have a similar rank which indicates that they are the regions that have lower risk index among all 
                the countries and is ranked 3rd.
                <br /><br />
                <i style="font-size: small;">**try to slide the slider to change the rank</i>
            </div>
            <div id="bump_chart"></div>
        </div>
    </div>
    <div class="divider"></div>
    <div class="card" style="text-align: right; background-color: whitesmoke;">
        Created by <a href="https://github.com/KeAn-Monash">Ke An</a>
    </div>
    
    <script src="js/utils.js"></script>
    <script type="text/javascript">
        showHidePlot('exposure');

        const map_plot = "js/map_plot.vg.json";
        const scatter_bar_exposure = "js/scatter_bar_plot_exposure.vg.json"
        const scatter_bar_vulnerability = "js/scatter_bar_plot_vulnerability.vg.json"
        const scatter_bar_susceptibility = "js/scatter_bar_plot_susceptibility.vg.json"
        const plot2 = "js/2d_histogram_heatmap.vg.json"
        const bump_chart = "js/bump_chart.vg.json"

        vegaEmbed('#map_plot', map_plot).then(
            (result) => {
                // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            }
        ).catch(
            console.error
        );

        vegaEmbed("#scatter_bar_exposure", scatter_bar_exposure).then(
            (result) => {

            }
        ).catch(
            console.error
        );

        vegaEmbed("#scatter_bar_vulnerability", scatter_bar_vulnerability).then(
            (result) => {

            }
        ).catch(
            console.error
        );

        vegaEmbed("#scatter_bar_susceptibility", scatter_bar_susceptibility).then(
            (result) => {

            }
        ).catch(
            console.error
        );

        vegaEmbed("#plot2", plot2).then(
            (result) => {

            }
        ).catch(
            console.error
        );

        vegaEmbed("#bump_chart", bump_chart).then(
            (result) => {

            }
        ).catch(
            console.error
        );

    </script>
</body>
</html>