{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "repeat": ["Exposure", "Vulnerability", "Susceptibility"],
  "columns": 3,
  "description": "",
  "width": 300,
  "height": 300,
  "padding": 5,
  "spec": {
    "data": {
      "url": "data/world_risk_index.csv"
    },
    "vconcat": [
      {
        "encoding": {
          "color": {
            "condition": {
              "param": "brush",
              "title": "Year",
              "field": "Year",
              "type": "nominal",
              "scale": {
                "domain": [
                  2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020,
                  2021
                ],
                "range": [
                  "#0A2D4D",
                  "#0B3155",
                  "#0C365D",
                  "#0D3B66",
                  "#FAF0CA",
                  "#F4D35E",
                  "#EE964B",
                  "#F95738",
                  "#FA664A",
                  "#FA664A",
                  "#FA745A"
                ]
              }
            },
            "value": "lightgray"
          },
          "x": {
            "field": "WRI",
            "title": "World Risk Index",
            "scale": { "domain": [0, 60] },
            "type": "quantitative"
          },
          "y": {
            "field": {
              "repeat": "repeat"
            },
            "scale": { "domain": [0, 100] },
            "type": "quantitative"
          },
          "opacity": {
            "value": 0.5
          }
        },
        "width": 600,
        "height": 300,
        "mark": {
          "type": "point",
          "tooltip": true
        },
        "params": [
          {
            "name": "brush",
            "select": { "type": "interval", "encodings": ["x"] }
          }
        ],
        "transform": [{ "filter": { "param": "click" } }]
      },
      {
        "encoding": {
          "color": {
            "condition": {
              "param": "click",
              "field": "Year",
              "scale": {
                "domain": [2011, 2012, 2013, 2014, 2015, 2016],
                "range": [
                  "#0D3B66",
                  "#FAF0CA",
                  "#F4D35E",
                  "#EE964B",
                  "#F95738",
                  "#FA664A"
                ]
              }
            },
            "value": "lightgray"
          },
          "x": { "aggregate": "count" },
          "y": {
            "title": "Exposure Category",
            "field": "Exposure Category",
            "scale": {
              "type": "ordinal",
              "domain": ["Very Low", "Low", "Medium", "High", "Very High"]
            }
          }
        },
        "width": 600,
        "mark": "bar",
        "params": [
          {
            "name": "click",
            "select": { "type": "point", "encodings": ["color"] }
          }
        ],
        "transform": [{ "filter": { "param": "brush" } }]
      }
    ]
  }
}
